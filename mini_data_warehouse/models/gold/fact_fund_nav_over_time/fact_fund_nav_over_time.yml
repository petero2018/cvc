version: 2

models:
  - name: fact_fund_nav_over_time
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns: [fund_key, nav_date_key]
    columns:
      - name: fund_key
        tests:
          - not_null
          - relationships:
              to: ref('dim_fund')
              field: fund_key
              column_name: fund_key
      - name: nav_date_key
        tests:
          - not_null
          - relationships:
              to: ref('dim_date')
              field: nav_date_key
              column_name: date_key